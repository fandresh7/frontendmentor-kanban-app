<div class="flex max-w-[600px] flex-col gap-4 md:min-w-[500px]">
  <div class="flex items-start justify-between gap-2">
    <h2 class="mb-4 max-w-[480px] text-xl font-bold">{{ data.title }}</h2>

    <button
      class="text-theme-gray-light hover:text-theme-primary hover:bg-theme-light-gray dark:hover:bg-theme-darker relative rounded-full px-4 py-2 transition-colors"
      (click)="toggleActionDropdown()">
      <ellipsis-icon></ellipsis-icon>
    </button>
  </div>

  @if (data.description) {
    <p>{{ data.description }}</p>
  }

  <div class="flex flex-col gap-2">
    <label
      for="dropdown-idle"
      class="text-theme-gray-light dark:text-theme-white block text-sm font-bold">
      Subtasks ({{ getCompletedSubtasks().length }} of {{ data.subTasks.length }} completed)
    </label>

    @for (subtask of data.subTasks; track subtask.id) {
      <label
        [for]="subtask.id"
        class="bg-theme-light-gray dark:bg-theme-darker hover:bg-theme-primary/25 dark:hover:bg-theme-primary/25 flex items-center space-x-4 rounded-md px-4 py-2.5 transition">
        <input
          type="checkbox"
          [id]="subtask.id"
          [checked]="subtask.isCompleted"
          class="accent-theme-primary border-theme-gray-light/25 h-4 w-4 border scheme-light focus:ring-0 focus:ring-offset-0 dark:scheme-dark" />

        <span>{{ subtask.title }}</span>
      </label>
    }
  </div>

  <div>
    <label
      for="dropdown-idle"
      class="text-theme-gray-light dark:text-theme-white mb-2 block text-sm font-bold">
      Current Status
    </label>
    <select
      id="dropdown-idle"
      class="text-theme-dark dark:text-theme-white border-theme-gray-light/25 placeholder:text-theme-dark/25 dark:placeholder:text-theme-white/25 dark:bg-theme-charcoal focus:border-theme-primary w-full rounded-md border px-4 py-2.5 focus:ring-0 focus:outline-none">
      @for (option of boardColumns(); track option.id) {
        <option [selected]="option.name === data.status">{{ option.name }}</option>
      }
    </select>
  </div>
</div>

@if (actionDropdown()) {
  <div
    class="bg-theme-white dark:bg-theme-darker text-theme-gray-light absolute top-16 right-4 z-10 flex w-40 flex-col items-start gap-4 rounded-lg p-4 font-normal shadow-md">
    <p
      class="hover:text-theme-primary cursor-pointer transition-colors"
      (click)="openEditTaskModal()">
      Edit Task
    </p>
    <p
      class="hover:text-theme-red-dark cursor-pointer transition-colors"
      (click)="openDeleteTaskModal()">
      Delete Task
    </p>
  </div>
}
